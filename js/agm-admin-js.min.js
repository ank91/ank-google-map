!function(e,o){"use strict";function t(o){return e.querySelector("#"+o)||e.getElementById(o)}function n(){var n=Math.max(e.documentElement.clientWidth,window.innerWidth||0),i=new google.maps.LatLng(agm_opt.map_Lat,agm_opt.map_Lng),l={draggable:n>480,overviewMapControl:!0,center:i,streetViewControl:!1,zoom:agm_opt.map_zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT}},g=new google.maps.Map(a,l),r=o("#agm_lat"),s=o("#agm_lng"),m=o("#agm_zoom"),c=o("#agm_zoom_pre"),p=new google.maps.Marker({draggable:!0,position:i,map:g,title:"Current Position"});google.maps.event.addListener(g,"rightclick",function(e){r.val(e.latLng.lat()),s.val(e.latLng.lng()),p.setTitle("Selected Position"),p.setPosition(e.latLng)}),google.maps.event.addListener(p,"dragend",function(e){r.val(e.latLng.lat()),s.val(e.latLng.lng())}),google.maps.event.addListener(g,"zoom_changed",function(){m.val(g.getZoom()),c.html(g.getZoom())}),google.maps.event.addListener(g,"center_changed",function(){var e=g.getCenter();r.val(e.lat()),s.val(e.lng())}),m.on("input click",function(){c.html(this.value),g.setZoom(parseInt(m.val()))});var d=new google.maps.places.Autocomplete(t("agm_autocomplete"));google.maps.event.addListener(d,"place_changed",function(){var e=d.getPlace();e.geometry&&(g.panTo(e.geometry.location),p.setPosition(e.geometry.location),g.setZoom(15),p.setTitle(e.formatted_address))})}var a=t("agm_map_canvas");"object"==typeof google?google.maps.event.addDomListener(window,"load",n):a.innerHTML='<h4 style="text-align: center;color: #ba060b">Failed to load Google Map.<br>Refresh this page and try again.<br>Check your internet connection as well.</h4>',o(function(e){e("#agm_autocomplete").keydown(function(e){(13==e.which||13==e.which)&&(e.preventDefault(),e.stopPropagation())}),e("#agm_info_on").click(function(){e(this).is(":checked")&&e(this).next("label").find("i:not(:visible)").fadeIn()}),agm_opt.color_picker&&e("#agm_color_field").wpColorPicker(),e("#screen-options-wrap").find("div.agm_meta_box").find("input").change(function(){var o=e(this).parents("div.agm_meta_box").find("input").serialize(),t=e("#agm_meta_ajax_result");t.stop(!0,!0).fadeOut(0),e.ajax({url:agm_opt.ajax_url,data:o,success:function(e,o){"1"==e&&"success"==o&&t.html('&#10004; Settings has been saved, <a href="#" onclick="window.location.reload()">Reload</a> page to see changes.').fadeIn(function(){t.delay("10000").fadeOut(0)})},error:function(e,o){var n="Error Saving Options";n=0===e.status?"Could not connect to server ! Try Again..":"timeout"===o?"Connection Timeout ! Try Again..":"Unknown error.",t.html("&#10008; "+n).show()}})})})}(document,jQuery);